(this.webpackJsonptest=this.webpackJsonptest||[]).push([[0],{39:function(e,t,s){},44:function(e,t,s){"use strict";s.r(t);var n=s(3),i=s(28),a=s(21),r=s(22),o=s(25),c=s(24),l=s(0),h=s.n(l),u=s(14),d=s.n(u),p=(s(39),s(9)),v=s(33),y=(s(40),s(32)),x=s(52),m=s(53),f=s(54),j=s(50),b=s(51),_=s.p+"static/media/fase.f659fc25.png";function k(e){var t=1===e.value?"\u25cf":2===e.value?"\u25cb":"";return e.checkedHint&&3===e.value?Object(n.jsx)("button",{style:{color:"orange",fontFamily:"sans-serif"},className:"square",onClick:e.onClick,children:e.is_x_next?"\u25cf":"\u25cb"}):Object(n.jsx)("button",{style:{fontFamily:"sans-serif"},className:"square",onClick:e.onClick,children:t})}var g=function(e){Object(o.a)(s,e);var t=Object(c.a)(s);function s(){return Object(a.a)(this,s),t.apply(this,arguments)}return Object(r.a)(s,[{key:"renderSquare",value:function(e){var t=this;return Object(n.jsx)(k,{value:this.props.squares[e],onClick:function(){return t.props.onClick(e)},checkedHint:this.props.checkedHint,is_x_next:this.props.is_x_next})}},{key:"render",value:function(){for(var e=[],t=0;t<this.props.dimension;t++){for(var s=[],i=0;i<this.props.dimension;i++)s.push(this.renderSquare(t*this.props.dimension+i));e.push(Object(n.jsx)("div",{className:"board-row",children:s}))}return Object(n.jsx)("div",{children:e})}}]),s}(h.a.Component),O=function(e){Object(o.a)(s,e);var t=Object(c.a)(s);function s(e){var n;Object(a.a)(this,s),n=t.call(this,e);var i=Array(64).fill(0);i[27]=1,i[28]=2,i[35]=2,i[36]=1;var r=i.slice();return n.hintMove(r,!0),n.state={history:[{squares:i}],is_x_next:!0,stepNumber:0,checkedHint:!1,latest_squares:r,is_player_vs_computer:!0,dropdown_arr:["APS105-smarter","APS105-smartest","sandbox"],selector:0,player:!0},n}return Object(r.a)(s,[{key:"is_xy_out_of_bound",value:function(e,t,s){return t<0||s<0||(t>=e||s>=e)}},{key:"map_xy_to_arr",value:function(e,t){return t.y*e+t.x}},{key:"map_arr_to_xy",value:function(e,t){var s=Math.floor(t/e);return{x:t-e*s,y:s}}},{key:"calculateScore",value:function(e){console.log("CS"),console.log(e);for(var t=0,s=0,n=0;n<64;n++)1===e[n]?t++:2===e[n]&&s++;return this.anyMove(e,!0)||this.anyMove(e,!1)?{end:!1,black:t,white:s}:t>s?{end:!0,win:1,black:t,white:s}:t===s?{end:!0,win:0,black:t,white:s}:{end:!0,win:2,black:t,white:s}}},{key:"anyMove",value:function(e,t){for(var s=0;s<64;s++){if(this.checkMove(e,s,t).move_check)return!0}return!1}},{key:"hintMove",value:function(e,t){console.log("hint"),console.log(e);for(var s=!1,n=0;n<64;n++){this.checkMove(e,n,t).move_check&&(e[n]=3,s=!0)}return s}},{key:"checkMove",value:function(e,t,s){if(0!==e[t]&&3!==e[t])return{move_check:!1,msg:"Spot already taken"};for(var n=s?1:2,i=s?2:1,a=this.map_arr_to_xy(8,t),r=!1,o=[],c=!1,l=-1;l<=1&&!r;l++){for(var h=[],u=-1;u<=1;u++)if(0!==l||0!==u){if(r)break;for(var d=JSON.parse(JSON.stringify(a));;){if(d.y+=l,d.x+=u,this.is_xy_out_of_bound(8,d.x,d.y)){r=!1;break}var p=this.map_xy_to_arr(8,d);if(e[p]===i)r=!0;else{if(e[p]===n)break;if(0===e[p]||3===e[p]){r=!1;break}}}h.push(r),r&&(c=!0),r=!1}else h.push(!1);o.push(h)}return{move_check:c,direction_checks:o,msg:"Illegal Move"}}},{key:"makeMove",value:function(e,t,s,n){var i=n?1:2,a=n?2:1,r=this.map_arr_to_xy(8,t);e[t]=i;for(var o=-1;o<=1;o++)for(var c=-1;c<=1;c++)if((0!==o||0!==c)&&s[c+1][o+1]){var l=JSON.parse(JSON.stringify(r));for(l.x+=o,l.y+=c;e[this.map_xy_to_arr(8,l)]===a;)e[this.map_xy_to_arr(8,l)]=i,l.x+=o,l.y+=c}}},{key:"endMoveWrapper",value:function(e,t){console.log("endMoveWrapper"),console.log(e),this.endMove(e,t)}},{key:"endMove",value:function(e,t){var s=this.state.history.slice(0,this.state.stepNumber+1),n=this.calculateScore(e).end;console.log("is_end: "+n);var i=e.slice();this.hintMove(i,!t);var a=t;return n||(a=!t,this.anyMove(e,a)&&this.setState({is_x_next:a})),this.setState({history:s.concat([{squares:e}]),latest_squares:i,stepNumber:s.length},(function(){console.log("endMove - callback"),n||a!==this.state.player&&"sandbox"!==this.state.dropdown_arr[this.state.selector]&&this.opponentMove(e)}))}},{key:"initGame",value:function(e){var t=this,s=Array(64).fill(0);if(s[27]=1,s[28]=2,s[35]=2,s[36]=1,this.setState({is_player_vs_computer:!0}),e||"sandbox"===this.state.dropdown_arr[this.state.selector]){var n=s.slice();this.setState({history:[{squares:s}],is_x_next:!0,stepNumber:0,latest_squares:n}),this.hintMove(n,!0)}else this.opponentMove(s).then((function(e){var s=e.slice();t.setState({history:[{squares:e}],latest_squares:s,is_x_next:!1,stepNumber:1}),t.hintMove(s,!1)}))}},{key:"opponentMove",value:function(e){for(var t=this,s=new FormData,n="",i=0;i<e.length;i++)n+=e[i];return s.append("board",n),s.append("color",!this.state.player),s.append("AI_player",this.state.dropdown_arr[this.state.selector]),fetch("http://localhost:8000/api/get_next",{method:"POST",body:s}).then((function(e){return e.json()})).then((function(e){for(var s=e.updated_board,n=Array(64).fill(0),i=0;i<s.length;i++)n[i]=parseInt(s[i]);return t.endMoveWrapper(n,!t.state.player),n}))}},{key:"changeOpponent",value:function(e){var t=this;this.setState({selector:e},(function(){t.initGame()}))}},{key:"changeSide",value:function(){var e=this,t=this;console.log(this.state.player),this.setState({player:!this.state.player},(function(){t.initGame(e.state.player)}))}},{key:"handleClick",value:function(e){var t=this.state.history.slice(0,this.state.stepNumber+1),s=t[t.length-1].squares.slice();if(console.log(t),0===s[e]||3===s[e]){this.setState({msg:""});var n=this.checkMove(s,e,this.state.is_x_next);console.log(n),n.move_check?(this.makeMove(s,e,n.direction_checks,this.state.is_x_next),this.endMoveWrapper(s,this.state.is_x_next)):this.setState({msg:n.msg}),console.log("end handle click")}else this.setState({msg:"Invalid move"})}},{key:"jumpTo",value:function(e){var t=this.state.history[e].squares.slice();this.hintMove(t,e%2===0);this.setState({stepNumber:e,is_x_next:e%2===0,latest_squares:t})}},{key:"handleButton",value:function(e,t){this.setState(Object(i.a)({},e,t.target.checked))}},{key:"render",value:function(){var e,t=this,s=this.state.history,i=this.calculateScore(this.state.latest_squares);s.map((function(e,s){var i=s?"Go to move #"+s:"Go to game start";return Object(n.jsx)("li",{children:Object(n.jsx)("button",{onClick:function(){return t.jumpTo(s)},children:i})},s)})),this.state.msg;i.end?e="Winner: "+(1===i.win?"\u26ab":"\u26aa"):e="Next player: "+(this.state.is_x_next?"\u26ab":"\u26aa");var a,r=this.state.dropdown_arr[this.state.selector];return a=this.state.player?"\u26ab Player("+i.black+") VS. "+r+"("+i.white+") \u26aa":"\u26ab "+r+"("+i.black+") VS. Player("+i.white+") \u26aa",Object(n.jsxs)("div",{className:"game",children:[Object(n.jsx)("div",{className:"game-board",style:{width:"50vw",display:"flex",justifyContent:"center",alignItems:"right"},children:Object(n.jsx)(g,{squares:this.state.latest_squares,onClick:function(e){return t.handleClick(e)},dimension:8,checkedHint:this.state.checkedHint,is_x_next:this.state.is_x_next})}),Object(n.jsxs)("div",{className:"game-info",style:{width:"50vw"},children:[Object(n.jsx)("h4",{children:"Match Status"}),Object(n.jsx)("div",{style:{marginTop:"20px"},children:a}),Object(n.jsx)("div",{children:e}),Object(n.jsx)("div",{style:{color:"red"},children:this.state.msg}),Object(n.jsx)("h5",{style:{marginTop:"50px"},children:"Choose your opponent"}),Object(n.jsx)(p.a,{children:Object(n.jsxs)(v.a,{id:"dropdown-item-button",title:r,onSelect:function(e){return t.changeOpponent(e)},children:[Object(n.jsx)(p.a.Item,{as:"button",eventKey:"0",children:"APS105-smarter"}),Object(n.jsx)(p.a.Item,{as:"button",eventKey:"1",children:"APS105-smartest"}),Object(n.jsx)(p.a.Item,{as:"button",eventKey:"2",children:"sandbox"})]})}),Object(n.jsxs)("div",{children:[Object(n.jsxs)(y.a,{style:{marginTop:"10px"},variant:"outline-primary",size:"sm",onClick:function(e){return t.changeSide()},children:[Object(n.jsx)(j.a,{}),"Switch Side"]}),Object(n.jsxs)(y.a,{style:{marginLeft:"10px",marginTop:"10px"},variant:"outline-primary",size:"sm",onClick:function(e){return t.changeSide()},children:[Object(n.jsx)(b.a,{}),"Restart"]})]}),Object(n.jsxs)("div",{className:"custom-control custom-switch",style:{marginTop:"10px"},children:[Object(n.jsx)("input",{type:"checkbox",className:"custom-control-input",id:"customSwitches",checked:this.state.checkedHint,onChange:function(e){t.handleButton("checkedHint",e)},readOnly:!0}),Object(n.jsx)("label",{className:"custom-control-label",htmlFor:"customSwitches",children:"Show Next Step Hint"})]})]})]})}}]),s}(h.a.Component),S=function(e){Object(o.a)(s,e);var t=Object(c.a)(s);function s(){return Object(a.a)(this,s),t.apply(this,arguments)}return Object(r.a)(s,[{key:"render",value:function(){return Object(n.jsxs)("div",{className:"Index",style:{height:"100%"},children:[Object(n.jsx)("div",{className:"Title",style:{height:"150px",display:"flex",justifyContent:"center",alignItems:"center",fontSize:"38px"},children:Object(n.jsxs)(x.a,{style:{width:"100%"},children:[Object(n.jsx)(m.a,{md:3,style:{display:"flex",justifyContent:"center",alignItems:"center"},children:Object(n.jsx)(f.a,{style:{height:"60px"},src:_,fluid:!0})}),Object(n.jsx)(m.a,{md:9,style:{paddingLeft:"10%"},children:"APS105 Reversi Interactive Platform"})]})}),Object(n.jsx)("div",{className:"Gameboard",style:{margin:"50px",display:"flex",justifyContent:"center",alignItems:"center"},children:Object(n.jsx)(O,{})}),Object(n.jsx)("footer",{style:{bottom:"10px",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",fontSize:"20px",position:"absolute"},children:Object(n.jsx)("div",{style:{borderTopStyle:"solid",borderWidth:"2px",width:"100%",borderColor:"#CCCCCC"},children:Object(n.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",padding:"20px"},children:"\xa9 2021 copyright APS105 Teaching Team, University of Toronto"})})})]})}}]),s}(h.a.Component);d.a.render(Object(n.jsx)(S,{}),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.d678d02d.chunk.js.map