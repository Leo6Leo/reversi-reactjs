(this.webpackJsonptest=this.webpackJsonptest||[]).push([[0],{66:function(e,t,s){"use strict";s.r(t);var n=s(4),a=s(59),r=s(38),i=s(39),o=s(41),c=s(40),l=s(0),h=s.n(l),u=s(10),v=s.n(u),d=(s(74),s(60)),p=s.n(d),y=s(61),x=s.n(y),_=s(15),f=s(65),m=(s(150),s(47));function b(e){var t=1===e.value?"\u25cf":2===e.value?"\u25cb":"";return e.checkedHint&&3===e.value?Object(n.jsx)("button",{style:{color:"orange",fontFamily:"sans-serif"},className:"square",onClick:e.onClick,children:e.is_x_next?"\u25cf":"\u25cb"}):Object(n.jsx)("button",{style:{fontFamily:"sans-serif"},className:"square",onClick:e.onClick,children:t})}var j=function(e){Object(o.a)(s,e);var t=Object(c.a)(s);function s(){return Object(r.a)(this,s),t.apply(this,arguments)}return Object(i.a)(s,[{key:"renderSquare",value:function(e){var t=this;return Object(n.jsx)(b,{value:this.props.squares[e],onClick:function(){return t.props.onClick(e)},checkedHint:this.props.checkedHint,is_x_next:this.props.is_x_next})}},{key:"render",value:function(){for(var e=[],t=0;t<this.props.dimension;t++){for(var s=[],a=0;a<this.props.dimension;a++)s.push(this.renderSquare(t*this.props.dimension+a));e.push(Object(n.jsx)("div",{className:"board-row",children:s}))}return Object(n.jsx)("div",{children:e})}}]),s}(h.a.Component),k=function(e){Object(o.a)(s,e);var t=Object(c.a)(s);function s(e){var n;Object(r.a)(this,s),n=t.call(this,e);var a=Array(64).fill(0);a[27]=1,a[28]=2,a[35]=2,a[36]=1;var i=a.slice();return n.hintMove(i,!0),n.state={history:[{squares:a}],is_x_next:!0,stepNumber:0,checkedHint:!1,latest_squares:i,is_player_vs_computer:!0,dropdown_arr:["APS105-smarter","APS105-smartest","sandbox"],selector:0,player:!0},n}return Object(i.a)(s,[{key:"is_xy_out_of_bound",value:function(e,t,s){return t<0||s<0||(t>=e||s>=e)}},{key:"map_xy_to_arr",value:function(e,t){return t.y*e+t.x}},{key:"map_arr_to_xy",value:function(e,t){var s=Math.floor(t/e);return{x:t-e*s,y:s}}},{key:"calculateScore",value:function(e){console.log("CS"),console.log(e);for(var t=0,s=0,n=0;n<64;n++)1===e[n]?t++:2===e[n]&&s++;return this.anyMove(e,!0)||this.anyMove(e,!1)?{end:!1,black:t,white:s}:t>s?{end:!0,win:1,black:t,white:s}:t===s?{end:!0,win:0,black:t,white:s}:{end:!0,win:2,black:t,white:s}}},{key:"anyMove",value:function(e,t){for(var s=0;s<64;s++){if(this.checkMove(e,s,t).move_check)return!0}return!1}},{key:"hintMove",value:function(e,t){console.log("hint"),console.log(e);for(var s=!1,n=0;n<64;n++){this.checkMove(e,n,t).move_check&&(e[n]=3,s=!0)}return s}},{key:"checkMove",value:function(e,t,s){if(0!==e[t]&&3!==e[t])return{move_check:!1,msg:"Spot already taken"};for(var n=s?1:2,a=s?2:1,r=this.map_arr_to_xy(8,t),i=!1,o=[],c=!1,l=-1;l<=1&&!i;l++){for(var h=[],u=-1;u<=1;u++)if(0!==l||0!==u){if(i)break;for(var v=JSON.parse(JSON.stringify(r));;){if(v.y+=l,v.x+=u,this.is_xy_out_of_bound(8,v.x,v.y)){i=!1;break}var d=this.map_xy_to_arr(8,v);if(e[d]===a)i=!0;else{if(e[d]===n)break;if(0===e[d]||3===e[d]){i=!1;break}}}h.push(i),i&&(c=!0),i=!1}else h.push(!1);o.push(h)}return{move_check:c,direction_checks:o,msg:"Illegal Move"}}},{key:"makeMove",value:function(e,t,s,n){var a=n?1:2,r=n?2:1,i=this.map_arr_to_xy(8,t);e[t]=a;for(var o=-1;o<=1;o++)for(var c=-1;c<=1;c++)if((0!==o||0!==c)&&s[c+1][o+1]){var l=JSON.parse(JSON.stringify(i));for(l.x+=o,l.y+=c;e[this.map_xy_to_arr(8,l)]===r;)e[this.map_xy_to_arr(8,l)]=a,l.x+=o,l.y+=c}}},{key:"endMoveWrapper",value:function(e,t){console.log("endMoveWrapper"),console.log(e),this.endMove(e,t)}},{key:"endMove",value:function(e,t){var s=this.state.history.slice(0,this.state.stepNumber+1),n=this.calculateScore(e).end;console.log("is_end: "+n);var a=e.slice();this.hintMove(a,!t);var r=t;return n||(r=!t,this.anyMove(e,r)&&this.setState({is_x_next:r})),this.setState({history:s.concat([{squares:e}]),latest_squares:a,stepNumber:s.length},(function(){console.log("endMove - callback"),n||r!==this.state.player&&"sandbox"!==this.state.dropdown_arr[this.state.selector]&&this.opponentMove(e)}))}},{key:"initGame",value:function(e){var t=this,s=Array(64).fill(0);if(s[27]=1,s[28]=2,s[35]=2,s[36]=1,this.setState({is_player_vs_computer:!0}),e||"sandbox"===this.state.dropdown_arr[this.state.selector]){var n=s.slice();this.setState({history:[{squares:s}],is_x_next:!0,stepNumber:0,latest_squares:n}),this.hintMove(n,!0)}else this.opponentMove(s).then((function(e){var s=e.slice();t.setState({history:[{squares:e}],latest_squares:s,is_x_next:!1,stepNumber:1}),t.hintMove(s,!1)}))}},{key:"opponentMove",value:function(e){for(var t=this,s=new FormData,n="",a=0;a<e.length;a++)n+=e[a];return s.append("board",n),s.append("color",!this.state.player),s.append("AI_player",this.state.dropdown_arr[this.state.selector]),fetch("http://localhost:8000/api/get_next",{method:"POST",body:s}).then((function(e){return e.json()})).then((function(e){for(var s=e.updated_board,n=Array(64).fill(0),a=0;a<s.length;a++)n[a]=parseInt(s[a]);return t.endMoveWrapper(n,!t.state.player),n}))}},{key:"changeOpponent",value:function(e){var t=this;this.setState({selector:e},(function(){t.initGame()}))}},{key:"changeSide",value:function(){var e=this,t=this;console.log(this.state.player),this.setState({player:!this.state.player},(function(){t.initGame(e.state.player)}))}},{key:"handleClick",value:function(e){var t=this.state.history.slice(0,this.state.stepNumber+1),s=t[t.length-1].squares.slice();if(console.log(t),0===s[e]||3===s[e]){this.setState({msg:""});var n=this.checkMove(s,e,this.state.is_x_next);console.log(n),n.move_check?(this.makeMove(s,e,n.direction_checks,this.state.is_x_next),this.endMoveWrapper(s,this.state.is_x_next)):this.setState({msg:n.msg}),console.log("end handle click")}else this.setState({msg:"Invalid move"})}},{key:"jumpTo",value:function(e){var t=this.state.history[e].squares.slice();this.hintMove(t,e%2===0);this.setState({stepNumber:e,is_x_next:e%2===0,latest_squares:t})}},{key:"handleButton",value:function(e,t){this.setState(Object(a.a)({},e,t.target.checked))}},{key:"render",value:function(){var e,t=this,s=this.state.history,a=this.calculateScore(this.state.latest_squares);s.map((function(e,s){var a=s?"Go to move #"+s:"Go to game start";return Object(n.jsx)("li",{children:Object(n.jsx)("button",{onClick:function(){return t.jumpTo(s)},children:a})},s)})),this.state.msg;a.end?e="Winner: "+(1===a.win?"\u26ab":"\u26aa"):e="Next player: "+(this.state.is_x_next?"\u26ab":"\u26aa");var r,i=this.state.dropdown_arr[this.state.selector];return r=this.state.player?"\u26ab Player("+a.black+") VS. "+i+"("+a.white+") \u26aa":"\u26ab "+i+"("+a.black+") VS. Player("+a.white+") \u26aa",Object(n.jsxs)("div",{className:"game",children:[Object(n.jsx)("div",{className:"game-board",children:Object(n.jsx)(j,{squares:this.state.latest_squares,onClick:function(e){return t.handleClick(e)},dimension:8,checkedHint:this.state.checkedHint,is_x_next:this.state.is_x_next})}),Object(n.jsxs)("div",{className:"game-info",children:[Object(n.jsx)("h5",{children:"Choose your opponent"}),Object(n.jsx)(_.a,{children:Object(n.jsxs)(f.a,{id:"dropdown-item-button",title:i,onSelect:function(e){return t.changeOpponent(e)},children:[Object(n.jsx)(_.a.Item,{as:"button",eventKey:"0",children:"APS105-smarter"}),Object(n.jsx)(_.a.Item,{as:"button",eventKey:"1",children:"APS105-smartest"}),Object(n.jsx)(_.a.Item,{as:"button",eventKey:"2",children:"sandbox"})]})}),Object(n.jsx)("div",{style:{marginTop:"20px"},children:r}),Object(n.jsx)("div",{children:Object(n.jsx)(m.a,{style:{marginTop:"10px"},variant:"outline-primary",size:"sm",onClick:function(e){return t.changeSide()},children:"Switch Side"})}),Object(n.jsx)(x.a,{style:{marginTop:"10px"},control:Object(n.jsx)(p.a,{checked:this.state.checkedHint,onChange:function(e){t.handleButton("checkedHint",e)},value:"Show Next Step Hint",color:"primary"}),label:"Show Next Step Hint"}),Object(n.jsx)("div",{children:e}),Object(n.jsx)("div",{style:{color:"red"},children:this.state.msg})]})]})}}]),s}(h.a.Component),O=function(e){Object(o.a)(s,e);var t=Object(c.a)(s);function s(){return Object(r.a)(this,s),t.apply(this,arguments)}return Object(i.a)(s,[{key:"render",value:function(){return Object(n.jsxs)("div",{className:"Index",children:[Object(n.jsx)("div",{className:"Title",style:{height:"150px",display:"flex",justifyContent:"center",alignItems:"center",fontSize:"48px"},children:"APS105 Reversi Interactive Platform"}),Object(n.jsx)("div",{className:"Gameboard",style:{margin:"20px"},children:Object(n.jsx)(k,{})})]})}}]),s}(h.a.Component);v.a.render(Object(n.jsx)(O,{}),document.getElementById("root"))},74:function(e,t,s){}},[[66,1,2]]]);
//# sourceMappingURL=main.84941f99.chunk.js.map